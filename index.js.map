{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport default renderImages;\n\nlet lightbox;\n\nfunction renderImages(images) {\n    const ul = document.querySelector('ul');\n    let markup = '';\n\n    images.forEach(image => {\n        markup += `\n        <li id='parent-li'>\n            <a href=\"${image.largeImageURL}\"  class=\"lightbox\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" data-large-image=\"${image.largeImageURL}\" width=\"360\">\n                <ul id=\"inner-ul\">\n                    <li id=\"inner-li\">\n                        <div id=\"name\">Likes</div>\n                        <div id=\"count\">${image.likes}</div>\n                    </li>\n                    <li id=\"inner-li\">\n                        <div id=\"name\">Views</div>\n                        <div id=\"count\">${image.views}</div>\n                    </li>\n                    <li id=\"inner-li\">\n                        <div id=\"name\">Comments</div>\n                        <div id=\"count\">${image.comments}</div>\n                    </li>\n                    <li id=\"inner-li\">\n                        <div id=\"name\">Downloads</div>\n                        <div id=\"count\">${image.downloads}</div>\n                    </li>\n                </ul>\n            </a>\n        </li>\n        `;\n    });\n\n    ul.insertAdjacentHTML('beforeend', markup);\n\n    if (lightbox) {\n        lightbox.refresh();\n    } else {\n        lightbox = new SimpleLightbox('.lightbox', {\n            captionsData: 'alt',\n            captionDelay: 250\n        });\n    }\n}","import axios from 'axios';\nimport renderImages from './render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nexport default searchImages;\nlet page = 1;\nlet query = '';\nconst loading = document.querySelector('.loader');\nloading.classList.add('hidden');\nasync function searchImages(newQuery) {\n  if (newQuery !== query) {\n    query = newQuery;\n    page = 1;\n  }\n  let countForPage = 15;\n  const searchParams = new URLSearchParams({\n    key: '45503418-8e4034a5d9b1169325787ad22',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: countForPage,\n    page: page,\n  });\n  const url = `https://pixabay.com/api/?${searchParams}`;\n  try {\n    loading.classList.remove('hidden');\n    document.querySelector('span').style.display = 'block';\n    const response = await axios.get(url);\n    const data = response.data;\n    document.querySelector('span').style.display = 'none';\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        color: '#FF0000',\n        position: 'topRight',\n      });\n      return;\n    } else {\n      renderImages(data.hits);\n    }\n    if (countForPage * page >= data.totalHits) {\n      document.querySelector('#load-more-button').style.display = 'none';\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      document.querySelector('#load-more-button').style.display = 'block';\n      loading.classList.add('hidden');\n    }\n    page++;\n    smoothScroll();\n  } catch (error) {\n    loading.classList.add('hidden');\n    console.error('Error:', error);\n  }\n}\ndocument.addEventListener('DOMContentLoaded', event => {\n  document.querySelector('#load-more-button').addEventListener('click', () => {\n    searchImages(query);\n  });\n});\nfunction smoothScroll() {\n  const firstCard = document.querySelector('#parent-li');\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2, //control\n      behavior: 'smooth',\n    });\n  }\n}","\nimport searchImages from './js/pixabay-api.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\ndocument.getElementById('form').addEventListener('submit', function(event) {\n    event.preventDefault(); \n    var inputValue = event.target.elements.input.value; \n    document.getElementById('main-ul').innerHTML = '';\n    document.getElementById('load-more-button').style.display = 'none';\n\n    if (inputValue.trim() === '') {\n        iziToast.warning({\n            message: 'Please enter a search query.',\n            position: 'topRight',\n        });\n    } else {\n        searchImages(inputValue);\n    }\n    event.target.reset();\n});"],"names":["lightbox","renderImages","images","ul","markup","image","SimpleLightbox","page","query","loading","searchImages","newQuery","countForPage","url","data","axios","iziToast","smoothScroll","error","event","firstCard","cardHeight","inputValue"],"mappings":"owBAKA,IAAIA,EAEJ,SAASC,EAAaC,EAAQ,CAC1B,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtC,IAAIC,EAAS,GAEbF,EAAO,QAAQG,GAAS,CACpBD,GAAU;AAAA;AAAA,uBAEKC,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI,uBAAuBA,EAAM,aAAa;AAAA;AAAA;AAAA;AAAA,0CAIlEA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,0CAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,SAMzD,CAAK,EAEDF,EAAG,mBAAmB,YAAaC,CAAM,EAErCJ,EACAA,EAAS,QAAO,EAEhBA,EAAW,IAAIM,EAAe,YAAa,CACvC,aAAc,MACd,aAAc,GAC1B,CAAS,CAET,CC5CA,IAAIC,EAAO,EACPC,EAAQ,GACZ,MAAMC,EAAU,SAAS,cAAc,SAAS,EAChDA,EAAQ,UAAU,IAAI,QAAQ,EAC9B,eAAeC,EAAaC,EAAU,CAChCA,IAAaH,IACfA,EAAQG,EACRJ,EAAO,GAET,IAAIK,EAAe,GAUnB,MAAMC,EAAM,4BATS,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGL,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUI,EACV,KAAML,CACV,CAAG,CACmD,GACpD,GAAI,CACFE,EAAQ,UAAU,OAAO,QAAQ,EACjC,SAAS,cAAc,MAAM,EAAE,MAAM,QAAU,QAE/C,MAAMK,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KAEtB,GADA,SAAS,cAAc,MAAM,EAAE,MAAM,QAAU,OAC3CC,EAAK,KAAK,SAAW,EAAG,CAC1BE,EAAS,MAAM,CACb,QACE,2EACF,MAAO,UACP,SAAU,UAClB,CAAO,EACD,MACN,MACMf,EAAaa,EAAK,IAAI,EAEpBF,EAAeL,GAAQO,EAAK,WAC9B,SAAS,cAAc,mBAAmB,EAAE,MAAM,QAAU,OAC5DE,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,IAED,SAAS,cAAc,mBAAmB,EAAE,MAAM,QAAU,QAC5DP,EAAQ,UAAU,IAAI,QAAQ,GAEhCF,IACAU,GACD,OAAQC,EAAO,CACdT,EAAQ,UAAU,IAAI,QAAQ,EAC9B,QAAQ,MAAM,SAAUS,CAAK,CAC9B,CACH,CACA,SAAS,iBAAiB,mBAAoBC,GAAS,CACrD,SAAS,cAAc,mBAAmB,EAAE,iBAAiB,QAAS,IAAM,CAC1ET,EAAaF,CAAK,CACtB,CAAG,CACH,CAAC,EACD,SAASS,GAAe,CACtB,MAAMG,EAAY,SAAS,cAAc,YAAY,EACrD,GAAIA,EAAW,CACb,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH,CCpEA,SAAS,eAAe,MAAM,EAAE,iBAAiB,SAAU,SAASF,EAAO,CACvEA,EAAM,eAAc,EACpB,IAAIG,EAAaH,EAAM,OAAO,SAAS,MAAM,MAC7C,SAAS,eAAe,SAAS,EAAE,UAAY,GAC/C,SAAS,eAAe,kBAAkB,EAAE,MAAM,QAAU,OAExDG,EAAW,KAAM,IAAK,GACtBN,EAAS,QAAQ,CACb,QAAS,+BACT,SAAU,UACtB,CAAS,EAEDN,EAAaY,CAAU,EAE3BH,EAAM,OAAO,OACjB,CAAC"}